(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
require("./module/plugin");

var storage = chrome.storage.local;

var $menuatas = $(".meta-header-bar.mobile-hide ul")
,	$menukiri = $(".meta-header-bar.log-bar > ul")
,	login = $("#menu-right #after-login #dlabel-accordion").html()

if(login) {
	login = login.split(", ")[1].split(" ")[0];
} else {
	login = null;
}

console.log(login);

//$("body").addClass("clean-theme");
$("body").addClass("blues-theme");
$(".user-avatar img.photo").removeAttr("height").removeAttr("width");


//require('./module/widget').init(storage);
require('./module/thread').init(storage, login);
//require('./module/autosundul').init(storage, login);


},{"./module/plugin":2,"./module/thread":3}],2:[function(require,module,exports){
/*!
 * Tools.js
 * jQuery Tools v1.2.6 - The missing UI library for the Web
 * 
 * tabs/tabs.js
 * tabs/tabs.slideshow.js
 * 
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 * 
 * http://flowplayer.org/tools/
 * 
 */
(function(a){a.tools=a.tools||{version:"v1.2.6"},a.tools.tabs={conf:{tabs:"a",current:"current",onBeforeClick:null,onClick:null,effect:"default",initialIndex:0,event:"click",rotate:!1,slideUpSpeed:400,slideDownSpeed:400,history:!1},addEffect:function(a,c){b[a]=c}};var b={"default":function(a,b){this.getPanes().hide().eq(a).show(),b.call()},fade:function(a,b){var c=this.getConf(),d=c.fadeOutSpeed,e=this.getPanes();d?e.fadeOut(d):e.hide(),e.eq(a).fadeIn(c.fadeInSpeed,b)},slide:function(a,b){var c=this.getConf();this.getPanes().slideUp(c.slideUpSpeed),this.getPanes().eq(a).slideDown(c.slideDownSpeed,b)},ajax:function(a,b){this.getPanes().eq(0).load(this.getTabs().eq(a).attr("href"),b)}},c,d;a.tools.tabs.addEffect("horizontal",function(b,e){if(!c){var f=this.getPanes().eq(b),g=this.getCurrentPane();d||(d=this.getPanes().eq(0).width()),c=!0,f.show(),g.animate({width:0},{step:function(a){f.css("width",d-a)},complete:function(){a(this).hide(),e.call(),c=!1}}),g.length||(e.call(),c=!1)}});function e(c,d,e){var f=this,g=c.add(this),h=c.find(e.tabs),i=d.jquery?d:c.children(d),j;h.length||(h=c.children()),i.length||(i=c.parent().find(d)),i.length||(i=a(d)),a.extend(this,{click:function(c,d){var i=h.eq(c);typeof c=="string"&&c.replace("#","")&&(i=h.filter("[href*="+c.replace("#","")+"]"),c=Math.max(h.index(i),0));if(e.rotate){var k=h.length-1;if(c<0)return f.click(k,d);if(c>k)return f.click(0,d)}if(!i.length){if(j>=0)return f;c=e.initialIndex,i=h.eq(c)}if(c===j)return f;d=d||a.Event(),d.type="onBeforeClick",g.trigger(d,[c]);if(!d.isDefaultPrevented()){b[e.effect].call(f,c,function(){j=c,d.type="onClick",g.trigger(d,[c])}),h.removeClass(e.current),i.addClass(e.current);return f}},getConf:function(){return e},getTabs:function(){return h},getPanes:function(){return i},getCurrentPane:function(){return i.eq(j)},getCurrentTab:function(){return h.eq(j)},getIndex:function(){return j},next:function(){return f.click(j+1)},prev:function(){return f.click(j-1)},destroy:function(){h.unbind(e.event).removeClass(e.current),i.find("a[href^=#]").unbind("click.T");return f}}),a.each("onBeforeClick,onClick".split(","),function(b,c){a.isFunction(e[c])&&a(f).bind(c,e[c]),f[c]=function(b){b&&a(f).bind(c,b);return f}}),e.history&&a.fn.history&&(a.tools.history.init(h),e.event="history"),h.each(function(b){a(this).bind(e.event,function(a){f.click(b,a);return a.preventDefault()})}),i.find("a[href^=#]").bind("click.T",function(b){f.click(a(this).attr("href"),b)}),location.hash&&e.tabs=="a"&&c.find("[href="+location.hash+"]").length?f.click(location.hash):(e.initialIndex===0||e.initialIndex>0)&&f.click(e.initialIndex)}a.fn.tabs=function(b,c){var d=this.data("tabs");d&&(d.destroy(),this.removeData("tabs")),a.isFunction(c)&&(c={onBeforeClick:c}),c=a.extend({},a.tools.tabs.conf,c),this.each(function(){d=new e(a(this),b,c),a(this).data("tabs",d)});return c.api?d:this}})(jQuery);
(function(a){var b;b=a.tools.tabs.slideshow={conf:{next:".forward",prev:".backward",disabledClass:"disabled",autoplay:!1,autopause:!0,interval:3e3,clickable:!0,api:!1}};function c(b,c){var d=this,e=b.add(this),f=b.data("tabs"),g,h=!0;function i(c){var d=a(c);return d.length<2?d:b.parent().find(c)}var j=i(c.next).click(function(){f.next()}),k=i(c.prev).click(function(){f.prev()});function l(){g=setTimeout(function(){f.next()},c.interval)}a.extend(d,{getTabs:function(){return f},getConf:function(){return c},play:function(){if(g)return d;var b=a.Event("onBeforePlay");e.trigger(b);if(b.isDefaultPrevented())return d;h=!1,e.trigger("onPlay"),e.bind("onClick",l),l();return d},pause:function(){if(!g)return d;var b=a.Event("onBeforePause");e.trigger(b);if(b.isDefaultPrevented())return d;g=clearTimeout(g),e.trigger("onPause"),e.unbind("onClick",l);return d},resume:function(){h||d.play()},stop:function(){d.pause(),h=!0}}),a.each("onBeforePlay,onPlay,onBeforePause,onPause".split(","),function(b,e){a.isFunction(c[e])&&a(d).bind(e,c[e]),d[e]=function(b){return a(d).bind(e,b)}}),c.autopause&&f.getTabs().add(j).add(k).add(f.getPanes()).hover(d.pause,d.resume),c.autoplay&&d.play(),c.clickable&&f.getPanes().click(function(){f.next()});if(!f.getConf().rotate){var m=c.disabledClass;f.getIndex()||k.addClass(m),f.onBeforeClick(function(a,b){k.toggleClass(m,!b),j.toggleClass(m,b==f.getTabs().length-1)})}}a.fn.slideshow=function(d){var e=this.data("slideshow");if(e)return e;d=a.extend({},b.conf,d),this.each(function(){e=new c(a(this),d),a(this).data("slideshow",e)});return d.api?e:this}})(jQuery);

/*! ===========================================================
 * tooltip.js
 * bootstrap-tooltip.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b;this.$element=a(c);this.options=this.getOptions(d);this.enabled=true;if(this.options.trigger!="manual"){e=this.options.trigger=="hover"?"mouseenter":"focus";f=this.options.trigger=="hover"?"mouseleave":"blur";this.$element.on(e,this.options.selector,a.proxy(this.enter,this));this.$element.on(f,this.options.selector,a.proxy(this.leave,this))}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){b=a.extend({},a.fn[this.type].defaults,b,this.$element.data());if(b.delay&&typeof b.delay=="number"){b.delay={show:b.delay,hide:b.delay}}return b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show){c.show()}else{c.hoverState="in";setTimeout(function(){if(c.hoverState=="in"){c.show()}},c.options.delay.show)}},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.hide){c.hide()}else{c.hoverState="out";setTimeout(function(){if(c.hoverState=="out"){c.hide()}},c.options.delay.hide)}},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){a=this.tip();this.setContent();if(this.options.animation){a.addClass("fade")}f=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement;b=/in/.test(f);a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:document.body);c=this.getPosition(b);d=a[0].offsetWidth;e=a[0].offsetHeight;switch(b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width};break}a.css(g).addClass(f).addClass("in")}},setContent:function(){var a=this.tip();a.find(".tooltip-inner").html(this.getTitle());a.removeClass("fade in top bottom left right")},hide:function(){function d(){var b=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(b);c.remove()})}var b=this,c=this.tip();c.removeClass("in");a.support.transition&&this.$tip.hasClass("fade")?d():c.remove()},fixTitle:function(){var a=this.$element;if(a.attr("title")||typeof a.attr("data-original-title")!="string"){a.attr("data-original-title",a.attr("title")||"").removeAttr("title")}},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title);a=(a||"").toString().replace(/(^\s*|\s*$)/,"");return a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}};a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;if(!e)d.data("tooltip",e=new b(this,f));if(typeof c=="string")e[c]()})};a.fn.tooltip.Constructor=b;a.fn.tooltip.defaults={animation:true,delay:0,selector:false,placement:"top",trigger:"hover",title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery);!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var b=this.tip(),c=this.getTitle(),d=this.getContent();b.find(".popover-title")[a.type(c)=="object"?"append":"html"](c);b.find(".popover-content > *")[a.type(d)=="object"?"append":"html"](d);b.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;a=b.attr("data-content")||(typeof c.content=="function"?c.content.call(b[0]):c.content);a=a.toString().replace(/(^\s*|\s*$)/,"");return a},tip:function(){if(!this.$tip){this.$tip=a(this.options.template)}return this.$tip}});a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;if(!e)d.data("popover",e=new b(this,f));if(typeof c=="string")e[c]()})};a.fn.popover.Constructor=b;a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery);
},{}],3:[function(require,module,exports){
module.exports = {
	init: function (storage, login) {
		var _t = this;
			if(login) {
			$('.row[id^="post"]').each(function(a,b) {
				var _p 		= $(this)
				,	author 	= _p.find(".user-name > a.nickname").html()
				;
				_t.myPost(_p, author, login);
				_t.meQuote(_p, author, login);
				
			});
		}
	},

	myPost: function(e, author, me) {
		
		if(" " +me+ " " == author) {
			e.addClass("my-post");
		}
	},

	meQuote: function(e, author, me) {
		e.find(".entry > .post-quote").each(function(a,b) {
			var itu = $(this)
			,	author = itu.find("span:last-child b").html();
			if(author == me) {
				e.addClass("my-quote");
				itu.find("> span:last-child").addClass('my-qt');
				console.log("my quote");
			}
		});
	}
};
},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzb3VyY2UvanMvbWFpbiIsInNvdXJjZS9qcy9tb2R1bGUvcGx1Z2luLmpzIiwic291cmNlL2pzL21vZHVsZS90aHJlYWQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwicmVxdWlyZShcIi4vbW9kdWxlL3BsdWdpblwiKTtcblxudmFyIHN0b3JhZ2UgPSBjaHJvbWUuc3RvcmFnZS5sb2NhbDtcblxudmFyICRtZW51YXRhcyA9ICQoXCIubWV0YS1oZWFkZXItYmFyLm1vYmlsZS1oaWRlIHVsXCIpXG4sXHQkbWVudWtpcmkgPSAkKFwiLm1ldGEtaGVhZGVyLWJhci5sb2ctYmFyID4gdWxcIilcbixcdGxvZ2luID0gJChcIiNtZW51LXJpZ2h0ICNhZnRlci1sb2dpbiAjZGxhYmVsLWFjY29yZGlvblwiKS5odG1sKClcblxuaWYobG9naW4pIHtcblx0bG9naW4gPSBsb2dpbi5zcGxpdChcIiwgXCIpWzFdLnNwbGl0KFwiIFwiKVswXTtcbn0gZWxzZSB7XG5cdGxvZ2luID0gbnVsbDtcbn1cblxuY29uc29sZS5sb2cobG9naW4pO1xuXG4vLyQoXCJib2R5XCIpLmFkZENsYXNzKFwiY2xlYW4tdGhlbWVcIik7XG4kKFwiYm9keVwiKS5hZGRDbGFzcyhcImJsdWVzLXRoZW1lXCIpO1xuJChcIi51c2VyLWF2YXRhciBpbWcucGhvdG9cIikucmVtb3ZlQXR0cihcImhlaWdodFwiKS5yZW1vdmVBdHRyKFwid2lkdGhcIik7XG5cblxuLy9yZXF1aXJlKCcuL21vZHVsZS93aWRnZXQnKS5pbml0KHN0b3JhZ2UpO1xucmVxdWlyZSgnLi9tb2R1bGUvdGhyZWFkJykuaW5pdChzdG9yYWdlLCBsb2dpbik7XG4vL3JlcXVpcmUoJy4vbW9kdWxlL2F1dG9zdW5kdWwnKS5pbml0KHN0b3JhZ2UsIGxvZ2luKTtcblxuIiwiLyohXG4gKiBUb29scy5qc1xuICogalF1ZXJ5IFRvb2xzIHYxLjIuNiAtIFRoZSBtaXNzaW5nIFVJIGxpYnJhcnkgZm9yIHRoZSBXZWJcbiAqIFxuICogdGFicy90YWJzLmpzXG4gKiB0YWJzL3RhYnMuc2xpZGVzaG93LmpzXG4gKiBcbiAqIE5PIENPUFlSSUdIVFMgT1IgTElDRU5TRVMuIERPIFdIQVQgWU9VIExJS0UuXG4gKiBcbiAqIGh0dHA6Ly9mbG93cGxheWVyLm9yZy90b29scy9cbiAqIFxuICovXG4oZnVuY3Rpb24oYSl7YS50b29scz1hLnRvb2xzfHx7dmVyc2lvbjpcInYxLjIuNlwifSxhLnRvb2xzLnRhYnM9e2NvbmY6e3RhYnM6XCJhXCIsY3VycmVudDpcImN1cnJlbnRcIixvbkJlZm9yZUNsaWNrOm51bGwsb25DbGljazpudWxsLGVmZmVjdDpcImRlZmF1bHRcIixpbml0aWFsSW5kZXg6MCxldmVudDpcImNsaWNrXCIscm90YXRlOiExLHNsaWRlVXBTcGVlZDo0MDAsc2xpZGVEb3duU3BlZWQ6NDAwLGhpc3Rvcnk6ITF9LGFkZEVmZmVjdDpmdW5jdGlvbihhLGMpe2JbYV09Y319O3ZhciBiPXtcImRlZmF1bHRcIjpmdW5jdGlvbihhLGIpe3RoaXMuZ2V0UGFuZXMoKS5oaWRlKCkuZXEoYSkuc2hvdygpLGIuY2FsbCgpfSxmYWRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRDb25mKCksZD1jLmZhZGVPdXRTcGVlZCxlPXRoaXMuZ2V0UGFuZXMoKTtkP2UuZmFkZU91dChkKTplLmhpZGUoKSxlLmVxKGEpLmZhZGVJbihjLmZhZGVJblNwZWVkLGIpfSxzbGlkZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0Q29uZigpO3RoaXMuZ2V0UGFuZXMoKS5zbGlkZVVwKGMuc2xpZGVVcFNwZWVkKSx0aGlzLmdldFBhbmVzKCkuZXEoYSkuc2xpZGVEb3duKGMuc2xpZGVEb3duU3BlZWQsYil9LGFqYXg6ZnVuY3Rpb24oYSxiKXt0aGlzLmdldFBhbmVzKCkuZXEoMCkubG9hZCh0aGlzLmdldFRhYnMoKS5lcShhKS5hdHRyKFwiaHJlZlwiKSxiKX19LGMsZDthLnRvb2xzLnRhYnMuYWRkRWZmZWN0KFwiaG9yaXpvbnRhbFwiLGZ1bmN0aW9uKGIsZSl7aWYoIWMpe3ZhciBmPXRoaXMuZ2V0UGFuZXMoKS5lcShiKSxnPXRoaXMuZ2V0Q3VycmVudFBhbmUoKTtkfHwoZD10aGlzLmdldFBhbmVzKCkuZXEoMCkud2lkdGgoKSksYz0hMCxmLnNob3coKSxnLmFuaW1hdGUoe3dpZHRoOjB9LHtzdGVwOmZ1bmN0aW9uKGEpe2YuY3NzKFwid2lkdGhcIixkLWEpfSxjb21wbGV0ZTpmdW5jdGlvbigpe2EodGhpcykuaGlkZSgpLGUuY2FsbCgpLGM9ITF9fSksZy5sZW5ndGh8fChlLmNhbGwoKSxjPSExKX19KTtmdW5jdGlvbiBlKGMsZCxlKXt2YXIgZj10aGlzLGc9Yy5hZGQodGhpcyksaD1jLmZpbmQoZS50YWJzKSxpPWQuanF1ZXJ5P2Q6Yy5jaGlsZHJlbihkKSxqO2gubGVuZ3RofHwoaD1jLmNoaWxkcmVuKCkpLGkubGVuZ3RofHwoaT1jLnBhcmVudCgpLmZpbmQoZCkpLGkubGVuZ3RofHwoaT1hKGQpKSxhLmV4dGVuZCh0aGlzLHtjbGljazpmdW5jdGlvbihjLGQpe3ZhciBpPWguZXEoYyk7dHlwZW9mIGM9PVwic3RyaW5nXCImJmMucmVwbGFjZShcIiNcIixcIlwiKSYmKGk9aC5maWx0ZXIoXCJbaHJlZio9XCIrYy5yZXBsYWNlKFwiI1wiLFwiXCIpK1wiXVwiKSxjPU1hdGgubWF4KGguaW5kZXgoaSksMCkpO2lmKGUucm90YXRlKXt2YXIgaz1oLmxlbmd0aC0xO2lmKGM8MClyZXR1cm4gZi5jbGljayhrLGQpO2lmKGM+aylyZXR1cm4gZi5jbGljaygwLGQpfWlmKCFpLmxlbmd0aCl7aWYoaj49MClyZXR1cm4gZjtjPWUuaW5pdGlhbEluZGV4LGk9aC5lcShjKX1pZihjPT09ailyZXR1cm4gZjtkPWR8fGEuRXZlbnQoKSxkLnR5cGU9XCJvbkJlZm9yZUNsaWNrXCIsZy50cmlnZ2VyKGQsW2NdKTtpZighZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7YltlLmVmZmVjdF0uY2FsbChmLGMsZnVuY3Rpb24oKXtqPWMsZC50eXBlPVwib25DbGlja1wiLGcudHJpZ2dlcihkLFtjXSl9KSxoLnJlbW92ZUNsYXNzKGUuY3VycmVudCksaS5hZGRDbGFzcyhlLmN1cnJlbnQpO3JldHVybiBmfX0sZ2V0Q29uZjpmdW5jdGlvbigpe3JldHVybiBlfSxnZXRUYWJzOmZ1bmN0aW9uKCl7cmV0dXJuIGh9LGdldFBhbmVzOmZ1bmN0aW9uKCl7cmV0dXJuIGl9LGdldEN1cnJlbnRQYW5lOmZ1bmN0aW9uKCl7cmV0dXJuIGkuZXEoail9LGdldEN1cnJlbnRUYWI6ZnVuY3Rpb24oKXtyZXR1cm4gaC5lcShqKX0sZ2V0SW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gan0sbmV4dDpmdW5jdGlvbigpe3JldHVybiBmLmNsaWNrKGorMSl9LHByZXY6ZnVuY3Rpb24oKXtyZXR1cm4gZi5jbGljayhqLTEpfSxkZXN0cm95OmZ1bmN0aW9uKCl7aC51bmJpbmQoZS5ldmVudCkucmVtb3ZlQ2xhc3MoZS5jdXJyZW50KSxpLmZpbmQoXCJhW2hyZWZePSNdXCIpLnVuYmluZChcImNsaWNrLlRcIik7cmV0dXJuIGZ9fSksYS5lYWNoKFwib25CZWZvcmVDbGljayxvbkNsaWNrXCIuc3BsaXQoXCIsXCIpLGZ1bmN0aW9uKGIsYyl7YS5pc0Z1bmN0aW9uKGVbY10pJiZhKGYpLmJpbmQoYyxlW2NdKSxmW2NdPWZ1bmN0aW9uKGIpe2ImJmEoZikuYmluZChjLGIpO3JldHVybiBmfX0pLGUuaGlzdG9yeSYmYS5mbi5oaXN0b3J5JiYoYS50b29scy5oaXN0b3J5LmluaXQoaCksZS5ldmVudD1cImhpc3RvcnlcIiksaC5lYWNoKGZ1bmN0aW9uKGIpe2EodGhpcykuYmluZChlLmV2ZW50LGZ1bmN0aW9uKGEpe2YuY2xpY2soYixhKTtyZXR1cm4gYS5wcmV2ZW50RGVmYXVsdCgpfSl9KSxpLmZpbmQoXCJhW2hyZWZePSNdXCIpLmJpbmQoXCJjbGljay5UXCIsZnVuY3Rpb24oYil7Zi5jbGljayhhKHRoaXMpLmF0dHIoXCJocmVmXCIpLGIpfSksbG9jYXRpb24uaGFzaCYmZS50YWJzPT1cImFcIiYmYy5maW5kKFwiW2hyZWY9XCIrbG9jYXRpb24uaGFzaCtcIl1cIikubGVuZ3RoP2YuY2xpY2sobG9jYXRpb24uaGFzaCk6KGUuaW5pdGlhbEluZGV4PT09MHx8ZS5pbml0aWFsSW5kZXg+MCkmJmYuY2xpY2soZS5pbml0aWFsSW5kZXgpfWEuZm4udGFicz1mdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMuZGF0YShcInRhYnNcIik7ZCYmKGQuZGVzdHJveSgpLHRoaXMucmVtb3ZlRGF0YShcInRhYnNcIikpLGEuaXNGdW5jdGlvbihjKSYmKGM9e29uQmVmb3JlQ2xpY2s6Y30pLGM9YS5leHRlbmQoe30sYS50b29scy50YWJzLmNvbmYsYyksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZD1uZXcgZShhKHRoaXMpLGIsYyksYSh0aGlzKS5kYXRhKFwidGFic1wiLGQpfSk7cmV0dXJuIGMuYXBpP2Q6dGhpc319KShqUXVlcnkpO1xuKGZ1bmN0aW9uKGEpe3ZhciBiO2I9YS50b29scy50YWJzLnNsaWRlc2hvdz17Y29uZjp7bmV4dDpcIi5mb3J3YXJkXCIscHJldjpcIi5iYWNrd2FyZFwiLGRpc2FibGVkQ2xhc3M6XCJkaXNhYmxlZFwiLGF1dG9wbGF5OiExLGF1dG9wYXVzZTohMCxpbnRlcnZhbDozZTMsY2xpY2thYmxlOiEwLGFwaTohMX19O2Z1bmN0aW9uIGMoYixjKXt2YXIgZD10aGlzLGU9Yi5hZGQodGhpcyksZj1iLmRhdGEoXCJ0YWJzXCIpLGcsaD0hMDtmdW5jdGlvbiBpKGMpe3ZhciBkPWEoYyk7cmV0dXJuIGQubGVuZ3RoPDI/ZDpiLnBhcmVudCgpLmZpbmQoYyl9dmFyIGo9aShjLm5leHQpLmNsaWNrKGZ1bmN0aW9uKCl7Zi5uZXh0KCl9KSxrPWkoYy5wcmV2KS5jbGljayhmdW5jdGlvbigpe2YucHJldigpfSk7ZnVuY3Rpb24gbCgpe2c9c2V0VGltZW91dChmdW5jdGlvbigpe2YubmV4dCgpfSxjLmludGVydmFsKX1hLmV4dGVuZChkLHtnZXRUYWJzOmZ1bmN0aW9uKCl7cmV0dXJuIGZ9LGdldENvbmY6ZnVuY3Rpb24oKXtyZXR1cm4gY30scGxheTpmdW5jdGlvbigpe2lmKGcpcmV0dXJuIGQ7dmFyIGI9YS5FdmVudChcIm9uQmVmb3JlUGxheVwiKTtlLnRyaWdnZXIoYik7aWYoYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSlyZXR1cm4gZDtoPSExLGUudHJpZ2dlcihcIm9uUGxheVwiKSxlLmJpbmQoXCJvbkNsaWNrXCIsbCksbCgpO3JldHVybiBkfSxwYXVzZTpmdW5jdGlvbigpe2lmKCFnKXJldHVybiBkO3ZhciBiPWEuRXZlbnQoXCJvbkJlZm9yZVBhdXNlXCIpO2UudHJpZ2dlcihiKTtpZihiLmlzRGVmYXVsdFByZXZlbnRlZCgpKXJldHVybiBkO2c9Y2xlYXJUaW1lb3V0KGcpLGUudHJpZ2dlcihcIm9uUGF1c2VcIiksZS51bmJpbmQoXCJvbkNsaWNrXCIsbCk7cmV0dXJuIGR9LHJlc3VtZTpmdW5jdGlvbigpe2h8fGQucGxheSgpfSxzdG9wOmZ1bmN0aW9uKCl7ZC5wYXVzZSgpLGg9ITB9fSksYS5lYWNoKFwib25CZWZvcmVQbGF5LG9uUGxheSxvbkJlZm9yZVBhdXNlLG9uUGF1c2VcIi5zcGxpdChcIixcIiksZnVuY3Rpb24oYixlKXthLmlzRnVuY3Rpb24oY1tlXSkmJmEoZCkuYmluZChlLGNbZV0pLGRbZV09ZnVuY3Rpb24oYil7cmV0dXJuIGEoZCkuYmluZChlLGIpfX0pLGMuYXV0b3BhdXNlJiZmLmdldFRhYnMoKS5hZGQoaikuYWRkKGspLmFkZChmLmdldFBhbmVzKCkpLmhvdmVyKGQucGF1c2UsZC5yZXN1bWUpLGMuYXV0b3BsYXkmJmQucGxheSgpLGMuY2xpY2thYmxlJiZmLmdldFBhbmVzKCkuY2xpY2soZnVuY3Rpb24oKXtmLm5leHQoKX0pO2lmKCFmLmdldENvbmYoKS5yb3RhdGUpe3ZhciBtPWMuZGlzYWJsZWRDbGFzcztmLmdldEluZGV4KCl8fGsuYWRkQ2xhc3MobSksZi5vbkJlZm9yZUNsaWNrKGZ1bmN0aW9uKGEsYil7ay50b2dnbGVDbGFzcyhtLCFiKSxqLnRvZ2dsZUNsYXNzKG0sYj09Zi5nZXRUYWJzKCkubGVuZ3RoLTEpfSl9fWEuZm4uc2xpZGVzaG93PWZ1bmN0aW9uKGQpe3ZhciBlPXRoaXMuZGF0YShcInNsaWRlc2hvd1wiKTtpZihlKXJldHVybiBlO2Q9YS5leHRlbmQoe30sYi5jb25mLGQpLHRoaXMuZWFjaChmdW5jdGlvbigpe2U9bmV3IGMoYSh0aGlzKSxkKSxhKHRoaXMpLmRhdGEoXCJzbGlkZXNob3dcIixlKX0pO3JldHVybiBkLmFwaT9lOnRoaXN9fSkoalF1ZXJ5KTtcblxuLyohID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiB0b29sdGlwLmpzXG4gKiBib290c3RyYXAtdG9vbHRpcC5qcyB2Mi4wLjJcbiAqIGh0dHA6Ly90d2l0dGVyLmdpdGh1Yi5jb20vYm9vdHN0cmFwL2phdmFzY3JpcHQuaHRtbCN0b29sdGlwc1xuICogSW5zcGlyZWQgYnkgdGhlIG9yaWdpbmFsIGpRdWVyeS50aXBzeSBieSBKYXNvbiBGcmFtZVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvcHlyaWdodCAyMDEyIFR3aXR0ZXIsIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuIWZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO3ZhciBiPWZ1bmN0aW9uKGEsYil7dGhpcy5pbml0KFwidG9vbHRpcFwiLGEsYil9O2IucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpiLGluaXQ6ZnVuY3Rpb24oYixjLGQpe3ZhciBlLGY7dGhpcy50eXBlPWI7dGhpcy4kZWxlbWVudD1hKGMpO3RoaXMub3B0aW9ucz10aGlzLmdldE9wdGlvbnMoZCk7dGhpcy5lbmFibGVkPXRydWU7aWYodGhpcy5vcHRpb25zLnRyaWdnZXIhPVwibWFudWFsXCIpe2U9dGhpcy5vcHRpb25zLnRyaWdnZXI9PVwiaG92ZXJcIj9cIm1vdXNlZW50ZXJcIjpcImZvY3VzXCI7Zj10aGlzLm9wdGlvbnMudHJpZ2dlcj09XCJob3ZlclwiP1wibW91c2VsZWF2ZVwiOlwiYmx1clwiO3RoaXMuJGVsZW1lbnQub24oZSx0aGlzLm9wdGlvbnMuc2VsZWN0b3IsYS5wcm94eSh0aGlzLmVudGVyLHRoaXMpKTt0aGlzLiRlbGVtZW50Lm9uKGYsdGhpcy5vcHRpb25zLnNlbGVjdG9yLGEucHJveHkodGhpcy5sZWF2ZSx0aGlzKSl9dGhpcy5vcHRpb25zLnNlbGVjdG9yP3RoaXMuX29wdGlvbnM9YS5leHRlbmQoe30sdGhpcy5vcHRpb25zLHt0cmlnZ2VyOlwibWFudWFsXCIsc2VsZWN0b3I6XCJcIn0pOnRoaXMuZml4VGl0bGUoKX0sZ2V0T3B0aW9uczpmdW5jdGlvbihiKXtiPWEuZXh0ZW5kKHt9LGEuZm5bdGhpcy50eXBlXS5kZWZhdWx0cyxiLHRoaXMuJGVsZW1lbnQuZGF0YSgpKTtpZihiLmRlbGF5JiZ0eXBlb2YgYi5kZWxheT09XCJudW1iZXJcIil7Yi5kZWxheT17c2hvdzpiLmRlbGF5LGhpZGU6Yi5kZWxheX19cmV0dXJuIGJ9LGVudGVyOmZ1bmN0aW9uKGIpe3ZhciBjPWEoYi5jdXJyZW50VGFyZ2V0KVt0aGlzLnR5cGVdKHRoaXMuX29wdGlvbnMpLmRhdGEodGhpcy50eXBlKTtpZighYy5vcHRpb25zLmRlbGF5fHwhYy5vcHRpb25zLmRlbGF5LnNob3cpe2Muc2hvdygpfWVsc2V7Yy5ob3ZlclN0YXRlPVwiaW5cIjtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoYy5ob3ZlclN0YXRlPT1cImluXCIpe2Muc2hvdygpfX0sYy5vcHRpb25zLmRlbGF5LnNob3cpfX0sbGVhdmU6ZnVuY3Rpb24oYil7dmFyIGM9YShiLmN1cnJlbnRUYXJnZXQpW3RoaXMudHlwZV0odGhpcy5fb3B0aW9ucykuZGF0YSh0aGlzLnR5cGUpO2lmKCFjLm9wdGlvbnMuZGVsYXl8fCFjLm9wdGlvbnMuZGVsYXkuaGlkZSl7Yy5oaWRlKCl9ZWxzZXtjLmhvdmVyU3RhdGU9XCJvdXRcIjtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoYy5ob3ZlclN0YXRlPT1cIm91dFwiKXtjLmhpZGUoKX19LGMub3B0aW9ucy5kZWxheS5oaWRlKX19LHNob3c6ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZztpZih0aGlzLmhhc0NvbnRlbnQoKSYmdGhpcy5lbmFibGVkKXthPXRoaXMudGlwKCk7dGhpcy5zZXRDb250ZW50KCk7aWYodGhpcy5vcHRpb25zLmFuaW1hdGlvbil7YS5hZGRDbGFzcyhcImZhZGVcIil9Zj10eXBlb2YgdGhpcy5vcHRpb25zLnBsYWNlbWVudD09XCJmdW5jdGlvblwiP3RoaXMub3B0aW9ucy5wbGFjZW1lbnQuY2FsbCh0aGlzLGFbMF0sdGhpcy4kZWxlbWVudFswXSk6dGhpcy5vcHRpb25zLnBsYWNlbWVudDtiPS9pbi8udGVzdChmKTthLnJlbW92ZSgpLmNzcyh7dG9wOjAsbGVmdDowLGRpc3BsYXk6XCJibG9ja1wifSkuYXBwZW5kVG8oYj90aGlzLiRlbGVtZW50OmRvY3VtZW50LmJvZHkpO2M9dGhpcy5nZXRQb3NpdGlvbihiKTtkPWFbMF0ub2Zmc2V0V2lkdGg7ZT1hWzBdLm9mZnNldEhlaWdodDtzd2l0Y2goYj9mLnNwbGl0KFwiIFwiKVsxXTpmKXtjYXNlXCJib3R0b21cIjpnPXt0b3A6Yy50b3ArYy5oZWlnaHQsbGVmdDpjLmxlZnQrYy53aWR0aC8yLWQvMn07YnJlYWs7Y2FzZVwidG9wXCI6Zz17dG9wOmMudG9wLWUsbGVmdDpjLmxlZnQrYy53aWR0aC8yLWQvMn07YnJlYWs7Y2FzZVwibGVmdFwiOmc9e3RvcDpjLnRvcCtjLmhlaWdodC8yLWUvMixsZWZ0OmMubGVmdC1kfTticmVhaztjYXNlXCJyaWdodFwiOmc9e3RvcDpjLnRvcCtjLmhlaWdodC8yLWUvMixsZWZ0OmMubGVmdCtjLndpZHRofTticmVha31hLmNzcyhnKS5hZGRDbGFzcyhmKS5hZGRDbGFzcyhcImluXCIpfX0sc2V0Q29udGVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMudGlwKCk7YS5maW5kKFwiLnRvb2x0aXAtaW5uZXJcIikuaHRtbCh0aGlzLmdldFRpdGxlKCkpO2EucmVtb3ZlQ2xhc3MoXCJmYWRlIGluIHRvcCBib3R0b20gbGVmdCByaWdodFwiKX0saGlkZTpmdW5jdGlvbigpe2Z1bmN0aW9uIGQoKXt2YXIgYj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5vZmYoYS5zdXBwb3J0LnRyYW5zaXRpb24uZW5kKS5yZW1vdmUoKX0sNTAwKTtjLm9uZShhLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYik7Yy5yZW1vdmUoKX0pfXZhciBiPXRoaXMsYz10aGlzLnRpcCgpO2MucmVtb3ZlQ2xhc3MoXCJpblwiKTthLnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kdGlwLmhhc0NsYXNzKFwiZmFkZVwiKT9kKCk6Yy5yZW1vdmUoKX0sZml4VGl0bGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlbGVtZW50O2lmKGEuYXR0cihcInRpdGxlXCIpfHx0eXBlb2YgYS5hdHRyKFwiZGF0YS1vcmlnaW5hbC10aXRsZVwiKSE9XCJzdHJpbmdcIil7YS5hdHRyKFwiZGF0YS1vcmlnaW5hbC10aXRsZVwiLGEuYXR0cihcInRpdGxlXCIpfHxcIlwiKS5yZW1vdmVBdHRyKFwidGl0bGVcIil9fSxoYXNDb250ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VGl0bGUoKX0sZ2V0UG9zaXRpb246ZnVuY3Rpb24oYil7cmV0dXJuIGEuZXh0ZW5kKHt9LGI/e3RvcDowLGxlZnQ6MH06dGhpcy4kZWxlbWVudC5vZmZzZXQoKSx7d2lkdGg6dGhpcy4kZWxlbWVudFswXS5vZmZzZXRXaWR0aCxoZWlnaHQ6dGhpcy4kZWxlbWVudFswXS5vZmZzZXRIZWlnaHR9KX0sZ2V0VGl0bGU6ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMuJGVsZW1lbnQsYz10aGlzLm9wdGlvbnM7YT1iLmF0dHIoXCJkYXRhLW9yaWdpbmFsLXRpdGxlXCIpfHwodHlwZW9mIGMudGl0bGU9PVwiZnVuY3Rpb25cIj9jLnRpdGxlLmNhbGwoYlswXSk6Yy50aXRsZSk7YT0oYXx8XCJcIikudG9TdHJpbmcoKS5yZXBsYWNlKC8oXlxccyp8XFxzKiQpLyxcIlwiKTtyZXR1cm4gYX0sdGlwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRpcD10aGlzLiR0aXB8fGEodGhpcy5vcHRpb25zLnRlbXBsYXRlKX0sdmFsaWRhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy4kZWxlbWVudFswXS5wYXJlbnROb2RlKXt0aGlzLmhpZGUoKTt0aGlzLiRlbGVtZW50PW51bGw7dGhpcy5vcHRpb25zPW51bGx9fSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9dHJ1ZX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZW5hYmxlZD1mYWxzZX0sdG9nZ2xlRW5hYmxlZDpmdW5jdGlvbigpe3RoaXMuZW5hYmxlZD0hdGhpcy5lbmFibGVkfSx0b2dnbGU6ZnVuY3Rpb24oKXt0aGlzW3RoaXMudGlwKCkuaGFzQ2xhc3MoXCJpblwiKT9cImhpZGVcIjpcInNob3dcIl0oKX19O2EuZm4udG9vbHRpcD1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcInRvb2x0aXBcIiksZj10eXBlb2YgYz09XCJvYmplY3RcIiYmYztpZighZSlkLmRhdGEoXCJ0b29sdGlwXCIsZT1uZXcgYih0aGlzLGYpKTtpZih0eXBlb2YgYz09XCJzdHJpbmdcIillW2NdKCl9KX07YS5mbi50b29sdGlwLkNvbnN0cnVjdG9yPWI7YS5mbi50b29sdGlwLmRlZmF1bHRzPXthbmltYXRpb246dHJ1ZSxkZWxheTowLHNlbGVjdG9yOmZhbHNlLHBsYWNlbWVudDpcInRvcFwiLHRyaWdnZXI6XCJob3ZlclwiLHRpdGxlOlwiXCIsdGVtcGxhdGU6JzxkaXYgY2xhc3M9XCJ0b29sdGlwXCI+PGRpdiBjbGFzcz1cInRvb2x0aXAtYXJyb3dcIj48L2Rpdj48ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiPjwvZGl2PjwvZGl2Pid9fSh3aW5kb3cualF1ZXJ5KTshZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGI9ZnVuY3Rpb24oYSxiKXt0aGlzLmluaXQoXCJwb3BvdmVyXCIsYSxiKX07Yi5wcm90b3R5cGU9YS5leHRlbmQoe30sYS5mbi50b29sdGlwLkNvbnN0cnVjdG9yLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6YixzZXRDb250ZW50OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy50aXAoKSxjPXRoaXMuZ2V0VGl0bGUoKSxkPXRoaXMuZ2V0Q29udGVudCgpO2IuZmluZChcIi5wb3BvdmVyLXRpdGxlXCIpW2EudHlwZShjKT09XCJvYmplY3RcIj9cImFwcGVuZFwiOlwiaHRtbFwiXShjKTtiLmZpbmQoXCIucG9wb3Zlci1jb250ZW50ID4gKlwiKVthLnR5cGUoZCk9PVwib2JqZWN0XCI/XCJhcHBlbmRcIjpcImh0bWxcIl0oZCk7Yi5yZW1vdmVDbGFzcyhcImZhZGUgdG9wIGJvdHRvbSBsZWZ0IHJpZ2h0IGluXCIpfSxoYXNDb250ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VGl0bGUoKXx8dGhpcy5nZXRDb250ZW50KCl9LGdldENvbnRlbnQ6ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMuJGVsZW1lbnQsYz10aGlzLm9wdGlvbnM7YT1iLmF0dHIoXCJkYXRhLWNvbnRlbnRcIil8fCh0eXBlb2YgYy5jb250ZW50PT1cImZ1bmN0aW9uXCI/Yy5jb250ZW50LmNhbGwoYlswXSk6Yy5jb250ZW50KTthPWEudG9TdHJpbmcoKS5yZXBsYWNlKC8oXlxccyp8XFxzKiQpLyxcIlwiKTtyZXR1cm4gYX0sdGlwOmZ1bmN0aW9uKCl7aWYoIXRoaXMuJHRpcCl7dGhpcy4kdGlwPWEodGhpcy5vcHRpb25zLnRlbXBsYXRlKX1yZXR1cm4gdGhpcy4kdGlwfX0pO2EuZm4ucG9wb3Zlcj1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcInBvcG92ZXJcIiksZj10eXBlb2YgYz09XCJvYmplY3RcIiYmYztpZighZSlkLmRhdGEoXCJwb3BvdmVyXCIsZT1uZXcgYih0aGlzLGYpKTtpZih0eXBlb2YgYz09XCJzdHJpbmdcIillW2NdKCl9KX07YS5mbi5wb3BvdmVyLkNvbnN0cnVjdG9yPWI7YS5mbi5wb3BvdmVyLmRlZmF1bHRzPWEuZXh0ZW5kKHt9LGEuZm4udG9vbHRpcC5kZWZhdWx0cyx7cGxhY2VtZW50OlwicmlnaHRcIixjb250ZW50OlwiXCIsdGVtcGxhdGU6JzxkaXYgY2xhc3M9XCJwb3BvdmVyXCI+PGRpdiBjbGFzcz1cImFycm93XCI+PC9kaXY+PGRpdiBjbGFzcz1cInBvcG92ZXItaW5uZXJcIj48aDMgY2xhc3M9XCJwb3BvdmVyLXRpdGxlXCI+PC9oMz48ZGl2IGNsYXNzPVwicG9wb3Zlci1jb250ZW50XCI+PHA+PC9wPjwvZGl2PjwvZGl2PjwvZGl2Pid9KX0od2luZG93LmpRdWVyeSk7IiwibW9kdWxlLmV4cG9ydHMgPSB7XG5cdGluaXQ6IGZ1bmN0aW9uIChzdG9yYWdlLCBsb2dpbikge1xuXHRcdHZhciBfdCA9IHRoaXM7XG5cdFx0XHRpZihsb2dpbikge1xuXHRcdFx0JCgnLnJvd1tpZF49XCJwb3N0XCJdJykuZWFjaChmdW5jdGlvbihhLGIpIHtcblx0XHRcdFx0dmFyIF9wIFx0XHQ9ICQodGhpcylcblx0XHRcdFx0LFx0YXV0aG9yIFx0PSBfcC5maW5kKFwiLnVzZXItbmFtZSA+IGEubmlja25hbWVcIikuaHRtbCgpXG5cdFx0XHRcdDtcblx0XHRcdFx0X3QubXlQb3N0KF9wLCBhdXRob3IsIGxvZ2luKTtcblx0XHRcdFx0X3QubWVRdW90ZShfcCwgYXV0aG9yLCBsb2dpbik7XG5cdFx0XHRcdFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9LFxuXG5cdG15UG9zdDogZnVuY3Rpb24oZSwgYXV0aG9yLCBtZSkge1xuXHRcdFxuXHRcdGlmKFwiIFwiICttZSsgXCIgXCIgPT0gYXV0aG9yKSB7XG5cdFx0XHRlLmFkZENsYXNzKFwibXktcG9zdFwiKTtcblx0XHR9XG5cdH0sXG5cblx0bWVRdW90ZTogZnVuY3Rpb24oZSwgYXV0aG9yLCBtZSkge1xuXHRcdGUuZmluZChcIi5lbnRyeSA+IC5wb3N0LXF1b3RlXCIpLmVhY2goZnVuY3Rpb24oYSxiKSB7XG5cdFx0XHR2YXIgaXR1ID0gJCh0aGlzKVxuXHRcdFx0LFx0YXV0aG9yID0gaXR1LmZpbmQoXCJzcGFuOmxhc3QtY2hpbGQgYlwiKS5odG1sKCk7XG5cdFx0XHRpZihhdXRob3IgPT0gbWUpIHtcblx0XHRcdFx0ZS5hZGRDbGFzcyhcIm15LXF1b3RlXCIpO1xuXHRcdFx0XHRpdHUuZmluZChcIj4gc3BhbjpsYXN0LWNoaWxkXCIpLmFkZENsYXNzKCdteS1xdCcpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIm15IHF1b3RlXCIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59OyJdfQ==
